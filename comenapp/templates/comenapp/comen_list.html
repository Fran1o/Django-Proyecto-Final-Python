{% extends 'blogapp/index.html' %}

{% block comentarios %}

{% if errores %}
<p style="color: red"> {{errores}} </p>
{% endif %}
<div class="container px-5 my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card border-0 rounded-3 shadow-lg">
                <div class="card-body p-4; text-center">
                    <div class="text-center">
                        <div class="h1 fw-light" style="color: rgb(63, 63, 252);">Comentarios</div>
                        <p style="color: rgb(237, 99, 99);" class="mb-4 text-muted">inquietudes y sujerencias para ayudar a la comunidad</p>
                    </div>
                    {% if list_comentarios %}
    
                        {% for comen in list_comentarios %}
                            <div>
                                <div style="border-radius: 0.4em;
                                            box-shadow: 0.3em 0.3em 0.7em #00000015;
                                            transition: border 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                                            border: rgb(66, 78, 246) 0.2em solid;" class="card h-100">
                        
                                <div> <strong class="col-md-5 mb-2" >Autor: <h7>{{ comen.remitente }}</h7></strong></div><p>{{ comen.contenido }}</p><p style="color: rgb(237, 99, 99);" class="mb-1 text-muted">{{ comen.fecha }}</p>
                                
                                {% if comen.remitente_id == usuarios.id  %}
                                
                                    <div class="card-footer"><a class="btn btn-danger btn-sm" href=" {% url 'eliminar-comentario' comen.id %} ">Eliminar</a></div>
                                {% endif %}
                                    </div>
                                
                            </div> 
                            <br>
                        {% endfor %}
                
                    {% else %}
                    <p>No hay comentarios de momento</p>
                    {% endif %}

                            <div class="coment">
                                <div class="date">
                                    {{ coment.fecha }}
                                  
                        
                                </div>
                                <strong>{{ coment.remitente }}</strong>
                                <p>{{ coment.contenido|linebreaks }}</p>
                            </div>
                                                   
                    </div>
                </div>
            </div>
        </div>
    </div>


{% if request.user.is_authenticated %}


<div class="text-center" >

    <form  method="post">

        {% csrf_token %}

            {{ form_comentarios.as_p }}
        
        <div class="card-footer">
            <input class="btn btn-primary btn-sm" type="submit" value="Comentar" >
        </div>
    
    </form>

</div>                            

{% else %}

<div class="text-center" >

    <form method="post" >

        {% csrf_token %}
                        
        {{ form_comentarios.as_p }}
        
        <div style="background: linear-gradient(90deg, #e3ffe7 0%, #d9e7ff 100%);" class="card-footer">
            <p class="mb-4 text-muted">Recuerda que debes inicar sesion para dejar un comentario</p>
            <a class="btn btn-primary disabled" href="#!">Comentar</a>
    
    </form>

</div>
{% endif %}



{% endblock %}